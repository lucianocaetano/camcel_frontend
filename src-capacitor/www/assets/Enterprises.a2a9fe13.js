import{ai as Q,a2 as a,aa as E,a6 as n,a5 as t,a3 as l,a4 as m,a9 as C,ab as x,af as q,aF as B,r as y,a as R,aG as N,ad as b,ac as h,a7 as f,H as j,ae as w,a8 as V}from"./index.c97da185.js";import{Q as U}from"./QInput.9d3d625c.js";import{Q as L}from"./QToolbar.f91025f5.js";import{_ as T,b as k,Q as M}from"./QCardSection.3bdf9a7a.js";import{a as S,b as F}from"./axios.3d912423.js";import{Q as D}from"./QCheckbox.337e149d.js";import{Q as H}from"./QFile.3a1fda0e.js";import{Q as I}from"./QSelect.2b0028e2.js";import{Q as z}from"./QForm.2ebf8009.js";import{Q as A}from"./QCardActions.ba5cce65.js";import{Q as G}from"./QDialog.d42c9718.js";import{C as P}from"./ClosePopup.e72f02d5.js";import"./enterprise.store.bd76e559.js";import{u as J,a as K}from"./enterprises.hooks.505d1084.js";import"./user.store.7bf26499.js";import"./pinia.485b638e.js";import"./QChip.ba98e3ca.js";import"./format.a8cdc0f5.js";import"./QItemLabel.bcb8e9f7.js";const O={props:["enterprise"],setup(){return{api_base_backend:S}}},W={key:0,style:{width:"100%",height:"100%"}},X=["src"],Y={class:"w-full"},Z={key:1,style:{width:"100%",height:"100%"},class:"row justify-center items-center"},$={class:"text-caption text-grey"};function ee(v,r,i,e,c,p){const d=Q("router-link");return a(),E(M,{class:"my-card"},{default:n(()=>[t(k,{class:"text-center",style:{height:"200px"}},{default:n(()=>[i.enterprise.image?(a(),l("div",W,[m("img",{src:`${e.api_base_backend}/${i.enterprise.image}`,style:{"object-fit":"cover"},width:"100%",height:"100%"},null,8,X),m("p",Y,C(i.enterprise.name),1)])):(a(),l("div",Z,[m("p",null,C(i.enterprise.name),1)]))]),_:1}),t(k,{class:"text-right row items-center justify-between"},{default:n(()=>[m("div",$,[x(C(i.enterprise.is_valid?"Verificado":"No verificado")+" ",1),t(q,{name:i.enterprise.is_valid?"check_circle":"cancel",color:i.enterprise.is_valid?"green":"red",size:"30px"},null,8,["name","color"])]),t(d,{class:"text-md",to:{name:"enterprise-detail",params:{slug:i.enterprise.slug}}},{default:n(()=>[t(q,{name:"arrow_forward",size:"20px"})]),_:1},8,["to"])]),_:1})]),_:1})}var re=T(O,[["render",ee],["__scopeId","data-v-e28ad17a"]]);const te={props:{show:{type:Boolean,required:!0}},setup(v,{emit:r}){const i=B(v,"show"),e=y(!0),c=y(null);F.get("users",{params:{role:"users_not_enterprise"}}).then(g=>{e.value=!1,c.value=g.data.users});const p=R({name:"",RUT:"",is_valid:!1,image:null,user_id:null}),d=y(null),_=()=>{r("handleCloseCreateEnterprise")};return{dataCreateEnterprise:p,handleCreateEnterprise:async()=>{var u;const{isError:g,error:s}=await J({...p,user_id:(u=p.user_id)==null?void 0:u.id});g.value?d.value=s.value:_()},show:i,handleClose:_,isLoadingUser:e,users:c,error_create:d}}},ae={class:"q-pa-xs bg-negative text-white"},se={class:"q-pa-xs bg-negative text-white"},ne={class:"q-pa-xs bg-negative text-white"},le={key:0},oe={class:"q-pa-xs bg-negative text-white"};function ie(v,r,i,e,c,p){return a(),E(G,{modelValue:e.show,"onUpdate:modelValue":r[5]||(r[5]=d=>e.show=d)},{default:n(()=>[t(M,{style:{width:"900px"}},{default:n(()=>[t(k,null,{default:n(()=>r[6]||(r[6]=[m("div",{class:"text-h6"},"Crear Empresa",-1)])),_:1}),t(k,{class:"q-pt-none"},{default:n(()=>[t(z,{onSubmit:N(e.handleCreateEnterprise,["prevent"])},{default:n(()=>{var d,_,o,g;return[t(U,{name:"RUT",required:"",label:"RUT",modelValue:e.dataCreateEnterprise.RUT,"onUpdate:modelValue":r[0]||(r[0]=s=>e.dataCreateEnterprise.RUT=s)},null,8,["modelValue"]),(a(!0),l(h,null,b((d=e.error_create)==null?void 0:d.RUT,(s,u)=>(a(),l("div",{key:u,class:"q-mt-sm"},[m("span",ae,C(s),1)]))),128)),t(U,{name:"name",required:"",label:"nombre",modelValue:e.dataCreateEnterprise.name,"onUpdate:modelValue":r[1]||(r[1]=s=>e.dataCreateEnterprise.name=s)},null,8,["modelValue"]),(a(!0),l(h,null,b((_=e.error_create)==null?void 0:_.nombre,(s,u)=>(a(),l("div",{key:u,class:"q-mt-sm"},[m("span",se,C(s),1)]))),128)),t(D,{label:"Verificado",modelValue:e.dataCreateEnterprise.is_valid,"onUpdate:modelValue":r[2]||(r[2]=s=>e.dataCreateEnterprise.is_valid=s)},null,8,["modelValue"]),t(H,{color:"teal",filled:"",label:"image",modelValue:e.dataCreateEnterprise.image,"onUpdate:modelValue":r[3]||(r[3]=s=>e.dataCreateEnterprise.image=s)},{prepend:n(()=>[t(q,{name:"cloud_upload"})]),_:1},8,["modelValue"]),(a(!0),l(h,null,b((o=e.error_create)==null?void 0:o.image,(s,u)=>(a(),l("div",{key:u,class:"q-mt-sm"},[m("span",ne,C(s),1)]))),128)),e.isLoadingUser?(a(),l("p",le,"loading...")):(a(),E(I,{key:1,modelValue:e.dataCreateEnterprise.user_id,"onUpdate:modelValue":r[4]||(r[4]=s=>e.dataCreateEnterprise.user_id=s),required:"","option-label":"email",options:e.users,label:"Usuario Empresario"},null,8,["modelValue","options"])),(a(!0),l(h,null,b((g=e.error_create)==null?void 0:g.user_id,(s,u)=>(a(),l("div",{key:u,class:"q-mt-sm"},[m("span",oe,C(s),1)]))),128)),t(f,{label:"Crear",class:"q-mt-md",type:"submit",color:"primary"})]}),_:1},8,["onSubmit"])]),_:1}),t(A,{align:"right"},{default:n(()=>[j(t(f,{flat:"",label:"Cerrar",color:"primary",onClick:e.handleClose},null,8,["onClick"]),[[P]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var de=T(te,[["render",ie]]);const me={components:{CardEnterprise:re,CreateEmpresa:de},setup(){const{isLoading:v,enterprises:r,refetch:i}=K(),e=y("");let c=!0;const p=async(o=null)=>{i(o),c=o},d=y(!1);return{isLoading:v,enterprises:r,search:e,enterpriseCreateMenu:d,filter:p,handleCloseEnterpriseCreateMenu:()=>{d.value=!1,i(c)}}}},ue={key:0,class:"q-pa-md row justify-center"},ce={key:0,class:"q-mx-sm"},pe={key:1,class:"text-center"};function _e(v,r,i,e,c,p){const d=Q("create-empresa"),_=Q("card-enterprise");return a(),l("div",null,[t(L,{class:"column"},{default:n(()=>[t(U,{style:{width:"100%"},filled:"",class:"custom-input",modelValue:e.search,"onUpdate:modelValue":r[0]||(r[0]=o=>e.search=o),label:"Busqueda"},{prepend:n(()=>[t(f,{flat:"",round:"",dense:"",class:"icono_de_busqueda",icon:"search"})]),_:1},8,["modelValue"]),t(L,{class:"row justify-between"},{default:n(()=>[m("div",null,[t(f,{flat:"",bordered:"",onClick:r[1]||(r[1]=o=>e.filter(null))},{default:n(()=>r[5]||(r[5]=[x(" Todos ")])),_:1}),t(f,{flat:"",bordered:"",onClick:r[2]||(r[2]=o=>e.filter(!0))},{default:n(()=>[t(V,{icon:"mdi-check",class:"bg-green text-white"}),r[6]||(r[6]=x("Validados "))]),_:1}),t(f,{flat:"",bordered:"",onClick:r[3]||(r[3]=o=>e.filter(!1))},{default:n(()=>[t(V,{icon:"mdi-close",class:"bg-red text-white"}),r[7]||(r[7]=x("No Validados "))]),_:1})]),m("div",null,[t(f,{flat:"",bordered:"",onClick:r[4]||(r[4]=o=>e.enterpriseCreateMenu=!0)},{default:n(()=>[t(V,{icon:"mdi-plus-circle-outline"})]),_:1}),e.enterpriseCreateMenu?(a(),E(d,{key:0,show:e.enterpriseCreateMenu,onHandleCloseCreateEnterprise:e.handleCloseEnterpriseCreateMenu},null,8,["show","onHandleCloseCreateEnterprise"])):w("",!0)])]),_:1})]),_:1}),e.isLoading?w("",!0):(a(),l("div",ue,[(a(!0),l(h,null,b(e.enterprises,o=>(a(),l("div",{key:o.id},[o.name.toLowerCase().includes(e.search.toLowerCase())?(a(),l("div",ce,[t(_,{enterprise:o},null,8,["enterprise"])])):w("",!0)]))),128))])),e.isLoading?(a(),l("div",pe,"loading ...")):w("",!0)])}var Re=T(me,[["render",_e]]);export{Re as default};
