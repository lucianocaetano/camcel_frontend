import{Q as G,f as V,g as U}from"./QItemLabel.bcb8e9f7.js";import{b3 as he,b4 as ge,b5 as Pe,r as x,l as K,v as Ze,a2 as y,aa as C,a6 as m,a4 as D,a5 as i,ab as k,a7 as _,a3 as b,ac as O,ad as F,ae as S,ah as Le,a9 as j,af as N}from"./index.c97da185.js";import{Q as le}from"./QList.7dfd456a.js";import{Q as Re}from"./QSelect.2b0028e2.js";import{Q as T}from"./QInput.9d3d625c.js";import{Q as ie}from"./QCheckbox.337e149d.js";import{_ as Be,Q as ue,b as P}from"./QCardSection.3bdf9a7a.js";import{Q as Xe}from"./QMarkupTable.915e59d6.js";import{Q as ce}from"./QCardActions.ba5cce65.js";import{Q as de}from"./QDialog.d42c9718.js";import{a as qe,Q as B}from"./QPage.8210ad11.js";import"./enterprise.store.bd76e559.js";import{b as Z}from"./axios.3d912423.js";import{u as Je}from"./user.store.7bf26499.js";import{p as M,c as We}from"./format.a8cdc0f5.js";import{u as Ge}from"./use-quasar.0d83382f.js";import"./QChip.ba98e3ca.js";import"./pinia.485b638e.js";const X=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ke(e){return tt(e)===0}function et(e,t){return t<=6?31:t<=11||Ke(e)?30:29}function tt(e){const t=X.length;let n=X[0],a,r,o,g,u;if(e<n||e>=X[t-1])throw new Error("Invalid Jalaali year "+e);for(u=1;u<t&&(a=X[u],r=a-n,!(e<a));u+=1)n=a;return g=e-n,r-g<6&&(g=g-r+at(r+4,33)*33),o=fe(fe(g+1,33)-1,4),o===-1&&(o=4),o}function at(e,t){return~~(e/t)}function fe(e,t){return e-~~(e/t)*t}const ve=864e5,ot=36e5,ae=6e4,ye="YYYY-MM-DDTHH:mm:ss.SSSZ",rt=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,nt=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,ee={};function st(e,t){const n="("+t.days.join("|")+")",a=e+n;if(ee[a]!==void 0)return ee[a];const r="("+t.daysShort.join("|")+")",o="("+t.months.join("|")+")",g="("+t.monthsShort.join("|")+")",u={};let f=0;const L=e.replace(nt,p=>{switch(f++,p){case"YY":return u.YY=f,"(-?\\d{1,2})";case"YYYY":return u.YYYY=f,"(-?\\d{1,4})";case"M":return u.M=f,"(\\d{1,2})";case"Mo":return u.M=f++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return u.M=f,"(\\d{2})";case"MMM":return u.MMM=f,g;case"MMMM":return u.MMMM=f,o;case"D":return u.D=f,"(\\d{1,2})";case"Do":return u.D=f++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return u.D=f,"(\\d{2})";case"H":return u.H=f,"(\\d{1,2})";case"HH":return u.H=f,"(\\d{2})";case"h":return u.h=f,"(\\d{1,2})";case"hh":return u.h=f,"(\\d{2})";case"m":return u.m=f,"(\\d{1,2})";case"mm":return u.m=f,"(\\d{2})";case"s":return u.s=f,"(\\d{1,2})";case"ss":return u.s=f,"(\\d{2})";case"S":return u.S=f,"(\\d{1})";case"SS":return u.S=f,"(\\d{2})";case"SSS":return u.S=f,"(\\d{3})";case"A":return u.A=f,"(AM|PM)";case"a":return u.a=f,"(am|pm)";case"aa":return u.aa=f,"(a\\.m\\.|p\\.m\\.)";case"ddd":return r;case"dddd":return n;case"Q":case"d":case"E":return"(\\d{1})";case"do":return f++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return f++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return f++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return u.Z=f,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return u.ZZ=f,"(Z|[+-]\\d{2}\\d{2})";case"X":return u.X=f,"(-?\\d+)";case"x":return u.x=f,"(-?\\d{4,})";default:return f--,p[0]==="["&&(p=p.substring(1,p.length-1)),p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:u,regex:new RegExp("^"+L)};return ee[a]=c,c}function De(e,t){return e!==void 0?e:t!==void 0?t.date:Pe.date}function me(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=Math.floor(a/60),o=a%60;return n+M(r)+t+M(o)}function lt(e,t,n){let a=e.getFullYear(),r=e.getMonth();const o=e.getDate();return t.year!==void 0&&(a+=n*t.year,delete t.year),t.month!==void 0&&(r+=n*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(a),e.setMonth(r),e.setDate(Math.min(o,re(e))),t.date!==void 0&&(e.setDate(e.getDate()+n*t.date),delete t.date),e}function it(e,t,n){const a=t.year!==void 0?t.year:e[`get${n}FullYear`](),r=t.month!==void 0?t.month-1:e[`get${n}Month`](),o=new Date(a,r+1,0).getDate(),g=Math.min(o,t.date!==void 0?t.date:e[`get${n}Date`]());return e[`set${n}Date`](1),e[`set${n}Month`](2),e[`set${n}FullYear`](a),e[`set${n}Month`](r),e[`set${n}Date`](g),delete t.year,delete t.month,delete t.date,e}function oe(e,t,n){const a=Me(t),r=new Date(e),o=a.year!==void 0||a.month!==void 0||a.date!==void 0?lt(r,a,n):r;for(const g in a){const u=We(g);o[`set${u}`](o[`get${u}`]()+n*a[g])}return o}function Me(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function be(e,t,n){const a=Me(t),r=n===!0?"UTC":"",o=new Date(e),g=a.year!==void 0||a.month!==void 0||a.date!==void 0?it(o,a,r):o;for(const u in a){const f=u.charAt(0).toUpperCase()+u.slice(1);g[`set${r}${f}`](a[u])}return g}function ut(e,t,n){const a=ct(e,t,n),r=new Date(a.year,a.month===null?null:a.month-1,a.day===null?1:a.day,a.hour,a.minute,a.second,a.millisecond),o=r.getTimezoneOffset();return a.timezoneOffset===null||a.timezoneOffset===o?r:oe(r,{minutes:a.timezoneOffset-o},1)}function ct(e,t,n,a,r){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(r!==void 0&&Object.assign(o,r),e==null||e===""||typeof e!="string")return o;t===void 0&&(t=ye);const g=De(n,he.props),u=g.months,f=g.monthsShort,{regex:L,map:c}=st(t,g),p=e.match(L);if(p===null)return o;let E="";if(c.X!==void 0||c.x!==void 0){const Y=parseInt(p[c.X!==void 0?c.X:c.x],10);if(isNaN(Y)===!0||Y<0)return o;const w=new Date(Y*(c.X!==void 0?1e3:1));o.year=w.getFullYear(),o.month=w.getMonth()+1,o.day=w.getDate(),o.hour=w.getHours(),o.minute=w.getMinutes(),o.second=w.getSeconds(),o.millisecond=w.getMilliseconds()}else{if(c.YYYY!==void 0)o.year=parseInt(p[c.YYYY],10);else if(c.YY!==void 0){const Y=parseInt(p[c.YY],10);o.year=Y<0?Y:2e3+Y}if(c.M!==void 0){if(o.month=parseInt(p[c.M],10),o.month<1||o.month>12)return o}else c.MMM!==void 0?o.month=f.indexOf(p[c.MMM])+1:c.MMMM!==void 0&&(o.month=u.indexOf(p[c.MMMM])+1);if(c.D!==void 0){if(o.day=parseInt(p[c.D],10),o.year===null||o.month===null||o.day<1)return o;const Y=a!=="persian"?new Date(o.year,o.month,0).getDate():et(o.year,o.month);if(o.day>Y)return o}c.H!==void 0?o.hour=parseInt(p[c.H],10)%24:c.h!==void 0&&(o.hour=parseInt(p[c.h],10)%12,(c.A&&p[c.A]==="PM"||c.a&&p[c.a]==="pm"||c.aa&&p[c.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),c.m!==void 0&&(o.minute=parseInt(p[c.m],10)%60),c.s!==void 0&&(o.second=parseInt(p[c.s],10)%60),c.S!==void 0&&(o.millisecond=parseInt(p[c.S],10)*10**(3-p[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(E=c.Z!==void 0?p[c.Z].replace(":",""):p[c.ZZ],o.timezoneOffset=(E[0]==="+"?-1:1)*(60*E.slice(1,3)+1*E.slice(3,5)))}return o.dateHash=M(o.year,6)+"/"+M(o.month)+"/"+M(o.day),o.timeHash=M(o.hour)+":"+M(o.minute)+":"+M(o.second)+E,o}function dt(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function ft(e,t){return be(new Date,e,t)}function mt(e){const t=new Date(e).getDay();return t===0?7:t}function J(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);const a=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-a);const r=(t-n)/(ve*7);return 1+Math.floor(r)}function pt(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function te(e,t){const n=new Date(e);return t===!0?pt(n):n.getTime()}function ht(e,t,n,a={}){const r=te(t,a.onlyDate),o=te(n,a.onlyDate),g=te(e,a.onlyDate);return(g>r||a.inclusiveFrom===!0&&g===r)&&(g<o||a.inclusiveTo===!0&&g===o)}function gt(e,t){return oe(e,t,1)}function vt(e,t){return oe(e,t,-1)}function I(e,t,n){const a=new Date(e),r=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":a[`${r}Month`](0);case"month":case"months":a[`${r}Date`](1);case"day":case"days":case"date":a[`${r}Hours`](0);case"hour":case"hours":a[`${r}Minutes`](0);case"minute":case"minutes":a[`${r}Seconds`](0);case"second":case"seconds":a[`${r}Milliseconds`](0)}return a}function yt(e,t,n){const a=new Date(e),r=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":a[`${r}Month`](11);case"month":case"months":a[`${r}Date`](re(a));case"day":case"days":case"date":a[`${r}Hours`](23);case"hour":case"hours":a[`${r}Minutes`](59);case"minute":case"minutes":a[`${r}Seconds`](59);case"second":case"seconds":a[`${r}Milliseconds`](999)}return a}function Dt(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.max(t,new Date(n))}),t}function Mt(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.min(t,new Date(n))}),t}function q(e,t,n){return(e.getTime()-e.getTimezoneOffset()*ae-(t.getTime()-t.getTimezoneOffset()*ae))/n}function we(e,t,n="days"){const a=new Date(e),r=new Date(t);switch(n){case"years":case"year":return a.getFullYear()-r.getFullYear();case"months":case"month":return(a.getFullYear()-r.getFullYear())*12+a.getMonth()-r.getMonth();case"days":case"day":case"date":return q(I(a,"day"),I(r,"day"),ve);case"hours":case"hour":return q(I(a,"hour"),I(r,"hour"),ot);case"minutes":case"minute":return q(I(a,"minute"),I(r,"minute"),ae);case"seconds":case"second":return q(I(a,"second"),I(r,"second"),1e3)}}function W(e){return we(e,I(e,"year"),"days")+1}function bt(e){return ge(e)===!0?"date":typeof e=="number"?"number":"string"}function wt(e,t,n){const a=new Date(e);if(t){const r=new Date(t);if(a<r)return r}if(n){const r=new Date(n);if(a>r)return r}return a}function _t(e,t,n){const a=new Date(e),r=new Date(t);if(n===void 0)return a.getTime()===r.getTime();switch(n){case"second":case"seconds":if(a.getSeconds()!==r.getSeconds())return!1;case"minute":case"minutes":if(a.getMinutes()!==r.getMinutes())return!1;case"hour":case"hours":if(a.getHours()!==r.getHours())return!1;case"day":case"days":case"date":if(a.getDate()!==r.getDate())return!1;case"month":case"months":if(a.getMonth()!==r.getMonth())return!1;case"year":case"years":if(a.getFullYear()!==r.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${n}`)}return!0}function re(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function z(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const pe={YY(e,t,n){const a=this.YYYY(e,t,n)%100;return a>=0?M(a):"-"+M(Math.abs(a))},YYYY(e,t,n){return n!=null?n:e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return z(e.getMonth()+1)},MM(e){return M(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return z(this.Q(e))},D(e){return e.getDate()},Do(e){return z(e.getDate())},DD(e){return M(e.getDate())},DDD(e){return W(e)},DDDo(e){return z(W(e))},DDDD(e){return M(W(e),3)},d(e){return e.getDay()},do(e){return z(e.getDay())},dd(e,t){return t.days[e.getDay()].slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return J(e)},wo(e){return z(J(e))},ww(e){return M(J(e))},H(e){return e.getHours()},HH(e){return M(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return M(this.h(e))},m(e){return e.getMinutes()},mm(e){return M(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return M(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return M(Math.floor(e.getMilliseconds()/10))},SSS(e){return M(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,t,n,a){const r=a==null?e.getTimezoneOffset():a;return me(r,":")},ZZ(e,t,n,a){const r=a==null?e.getTimezoneOffset():a;return me(r)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Yt(e,t,n,a,r){if(e!==0&&!e||e===1/0||e===-1/0)return;const o=new Date(e);if(isNaN(o))return;t===void 0&&(t=ye);const g=De(n,he.props);return t.replace(rt,(u,f)=>u in pe?pe[u](o,g,a,r):f===void 0?u:f.split("\\]").join("]"))}function kt(e){return ge(e)===!0?new Date(e.getTime()):e}var St={isValid:dt,extractDate:ut,buildDate:ft,getDayOfWeek:mt,getWeekOfYear:J,isBetweenDates:ht,addToDate:gt,subtractFromDate:vt,adjustDate:be,startOfDate:I,endOfDate:yt,getMaxDate:Dt,getMinDate:Mt,getDateDiff:we,getDayOfYear:W,inferDateFormat:bt,getDateBetween:wt,isSameDate:_t,daysInMonth:re,formatDate:Yt,clone:kt};const Vt={class:"ola q-mx-auto"},Et={key:0},xt={class:"col-6"},Ct={class:"row"},$t={class:"row"},It={class:"row"},jt={key:1},Tt={class:"row q-col-gutter-md"},Ht={key:2},Qt={class:"row q-col-gutter-md"},Ot={key:0},Ft={key:0},Ut={class:"col-6",style:{width:"60%"}},zt={class:"text-h6"},At={class:"text-subtitle1"},Nt={class:"col-6"},Pt={__name:"Trabajo",props:["items"],setup(e){const n=Je().token,a=x([]),r=x(!1),o=x(0),g=x({}),u=x(null),f=x([]);K(async()=>{try{const d=await Z.get("enterprises");f.value=d.data.map(l=>({enterprise_id:l.id,nombre:l.nombre}))}catch(d){console.error("Error al obtener los datos de la empresa:",d)}});const c=x({nombre:"",trabajo:""}),p=x([]),E=x([]),Y=x([]),w=Ge(),_e=()=>{p.value.push({fechaInicio:"",timeE:"",timeS:""})},Ye=d=>{p.value.splice(d,1)},ke=()=>{Y.value.push({nombre:"",rol:""})},Se=d=>{Y.value.splice(d,1)},Ve=()=>{E.value.push({titulo:"",cargarDetalles:!1,url:"",dataTang:"",valido:!1})},Ee=d=>{E.value.splice(d,1)},xe=()=>{if(!c.value.trabajo)return w.notify({type:"negative",message:"Por favor completa todos los campos de la actividad."}),!1;for(const d of p.value)if(!d.fechaInicio||!d.timeE||!d.timeS)return w.notify({type:"negative",message:"Por favor completa todos los campos de fecha y horario."}),!1;for(const d of Y.value)if(!d.nombre||!d.rol)return w.notify({type:"negative",message:"Por favor completa todos los datos de los operadores."}),!1;for(const d of E.value){if(!d.titulo)return w.notify({type:"negative",message:"Por favor completa el t\xEDtulo de todos los documentos."}),!1;if(d.cargarDetalles&&(!d.url||!d.dataTang))return w.notify({type:"negative",message:"Por favor completa los detalles de los documentos marcados."}),!1}return!0},Ce=async()=>{if(!xe())return;p.value=p.value.map(l=>{if(l.fechaInicio&&l.timeE&&l.timeS){const s=new Date(l.fechaInicio);return isNaN(s.getTime())?(console.error("Fecha inv\xE1lida:",l.fechaInicio),null):{fechaInicio:s.toISOString().split("T")[0],timeE:l.timeE,timeS:l.timeS}}else return console.error("Faltan datos en:",l),null}).filter(l=>l!==null);const d={trabajo:c.value.trabajo,fechas:p.value,operadores:Y.value,documentos:E.value,enterprise_id:u.value,confirmacionPREV:null};try{await w.loading.show(),await Z.post("admin/jobs",d),w.notify({type:"positive",message:"Actividad registrada exitosamente."}),r.value=!1,c.value={nombre:"",trabajo:""},p.value=[],Y.value=[],E.value=[]}catch(l){console.error("Error:",l.response?l.response.data:l.message),w.notify({type:"negative",message:"Hubo un error al registrar la actividad."})}finally{w.loading.hide()}},$e=()=>{o.value++},Ie=()=>{o.value--},je=d=>{g.value[d]=!ne(d)},ne=d=>!!g.value[d],H=x(),R=x(!1);function Te(d){R.value=!0,H.value=d}const He=async d=>{var l;try{const s=a.value[d].id;console.log("Enviando solicitud para confirmar prevenci\xF3n, Job ID:",s);const v=await Z.patch(`admin/jobs/${s}/updateConfirmation`,{confirmacion_prevencionista:1},{headers:{Authorization:`Bearer ${n}`}});console.log("Respuesta del backend:",v.data)}catch(s){console.error("Error al confirmar la prevenci\xF3n:",((l=s.response)==null?void 0:l.data)||s.message)}},Qe=async d=>{var l;try{const s=a.value[d].id;console.log("Enviando solicitud para denegar prevenci\xF3n, Job ID:",s);const v=await Z.patch(`admin/jobs/${s}/updateConfirmation`,{confirmacion_prevencionista:0},{headers:{Authorization:`Bearer ${n}`}});console.log("Respuesta del backend:",v.data)}catch(s){console.error("Error al denegar la prevenci\xF3n:",((l=s.response)==null?void 0:l.data)||s.message)}};function se(d){return d===null?"No disponible":d===1?"S\xED":"No"}function Oe(){R.value=!1}function Fe(d){window.open(d.url,"_blank")}function Ue(d){const l=St.formatDate(new Date,"YYYY-MM-DD");return d.filter(s=>(s.fechas||[]).some(h=>h>=l))}async function ze(){try{const d=await Z.get("admin/jobs"),l=d.data.jobs,s=d.data.job_dates,v=[];l.forEach($=>{const A=s.filter(Q=>Q.job_id===$.id)||[];if(!Array.isArray(A)){console.error("La variable 'fechas' no es un array:",A);return}const Ae=A.map(Q=>new Date(Q.fecha.replace(/"/g,""))).sort((Q,Ne)=>Q-Ne).map(Q=>Q.toISOString().split("T")[0]);v.push({id:$.id,nombre:$.enterprise,trabajo:$.trabajo||"Trabajo desconocido",fechas:Ae,confirmacionPREV:$.confirmacion_prevencionista,confirmacionEmpresa:$.confirmacion_empresa})});const h=Ue(v);a.value=h.sort(($,A)=>$.id-A.id)}catch(d){console.error("Error al obtener item:",d)}}return K(()=>{Ze().appContext.config.globalProperties.$echo.channel("jobs-channel").listen(".job-updated",l=>{if(console.log("Evento recibido:",l),l.job){const s=jobs.findIndex(v=>v.id===l.job.id);s!==-1?jobs[s]=l.job:jobs.push(l.job)}})}),K(()=>{ze()}),(d,l)=>(y(),C(qe,null,{default:m(()=>[D("div",Vt,[i(le,{bordered:"",style:{"background-color":"#ffffff"}},{default:m(()=>[i(G,{bordered:""},{default:m(()=>[i(V,{class:"col-2"},{default:m(()=>[i(U,{header:""},{default:m(()=>l[6]||(l[6]=[k("Nombre Empresa")])),_:1})]),_:1}),i(V,{class:"col-2"},{default:m(()=>[i(U,{header:""},{default:m(()=>l[7]||(l[7]=[k("Trabajo a realizar")])),_:1})]),_:1}),i(V,{class:"col-2 text-center"},{default:m(()=>[i(U,{header:""},{default:m(()=>l[8]||(l[8]=[k("Fechas de Trabajo")])),_:1})]),_:1}),i(V,{class:"col-2 text-center"},{default:m(()=>[i(U,{header:""},{default:m(()=>l[9]||(l[9]=[k("Confirmaci\xF3n "),D("br",null,null,-1),k("Prevencionista")])),_:1})]),_:1}),i(V,{class:"col-2 text-center"},{default:m(()=>[i(U,{header:""},{default:m(()=>l[10]||(l[10]=[k("Confirmaci\xF3n "),D("br",null,null,-1),k("Empresa")])),_:1})]),_:1}),i(V,{class:"col-2 text-center"},{default:m(()=>[i(U,{header:""},{default:m(()=>l[11]||(l[11]=[k("M\xE1s informaci\xF3n")])),_:1})]),_:1})]),_:1}),i(le,{bordered:""},{default:m(()=>[i(G,null,{default:m(()=>[i(V,{class:"col-12 text-center"},{default:m(()=>[i(_,{color:"green",onClick:l[0]||(l[0]=s=>r.value=!0),class:"col-12"},{default:m(()=>l[12]||(l[12]=[k("Registrar trabajo")])),_:1})]),_:1})]),_:1})]),_:1}),D("template",null,[i(de,{modelValue:r.value,"onUpdate:modelValue":l[4]||(l[4]=s=>r.value=s),class:"col-10"},{default:m(()=>[i(ue,{style:{height:"80%",width:"80%"}},{default:m(()=>[i(Xe,{style:{height:"90%","overflow-y":"scroll"}},{default:m(()=>[i(P,null,{default:m(()=>[o.value===0?(y(),b("div",Et,[D("div",xt,[i(Re,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=s=>u.value=s),options:f.value,"option-label":"nombre","option-value":"enterprise_id",label:"Seleccionar Empresa","emit-value":"","map-options":""},null,8,["modelValue","options"]),i(T,{class:"col-6",modelValue:c.value.trabajo,"onUpdate:modelValue":l[2]||(l[2]=s=>c.value.trabajo=s),label:"Trabajo a realizar"},null,8,["modelValue"])]),D("div",Ct,[D("div",null,[i(_,{label:"Agregar Fecha y Horario",onClick:_e,color:"primary"}),(y(!0),b(O,null,F(p.value,(s,v)=>(y(),b("div",{key:v,class:"fecha-hora-input"},[D("div",$t,[i(T,{class:"col-6",modelValue:s.fechaInicio,"onUpdate:modelValue":h=>s.fechaInicio=h,label:"Fecha",type:"date"},null,8,["modelValue","onUpdate:modelValue"]),i(_,{class:"col-2 q-mt-md",style:{"margin-left":"auto"},onClick:h=>Ye(v)},{default:m(()=>l[13]||(l[13]=[k(" Eliminar ")])),_:2},1032,["onClick"])]),D("div",It,[i(T,{filled:"",modelValue:s.timeE,"onUpdate:modelValue":h=>s.timeE=h,label:"Hora de entrada",mask:"time"},null,8,["modelValue","onUpdate:modelValue"]),i(T,{filled:"",modelValue:s.timeS,"onUpdate:modelValue":h=>s.timeS=h,label:"Hora de salida",mask:"time"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])])])):S("",!0),o.value===1?(y(),b("div",jt,[i(_,{label:"Agregar Operador",onClick:ke,color:"primary"}),(y(!0),b(O,null,F(Y.value,(s,v)=>(y(),b("div",{key:v,class:"operador-input"},[D("div",Tt,[i(T,{class:"col-6",modelValue:s.nombre,"onUpdate:modelValue":h=>s.nombre=h,label:"Nombre del Operador"},null,8,["modelValue","onUpdate:modelValue"]),i(T,{class:"col-6",modelValue:s.rol,"onUpdate:modelValue":h=>s.rol=h,label:"Rol del Operador"},null,8,["modelValue","onUpdate:modelValue"]),i(_,{class:"col-2 q-mt-md",style:{"margin-left":"auto"},onClick:h=>Se(v),color:"negative"},{default:m(()=>l[14]||(l[14]=[k(" Eliminar ")])),_:2},1032,["onClick"])])]))),128))])):S("",!0),o.value===2?(y(),b("div",Ht,[i(_,{label:"Agregar Documento",onClick:Ve,color:"primary"}),(y(!0),b(O,null,F(E.value,(s,v)=>(y(),b("div",{key:v,class:"documento-input"},[D("div",Qt,[i(T,{class:"col-6",modelValue:s.titulo,"onUpdate:modelValue":h=>s.titulo=h,label:"Tipo del Documento"},null,8,["modelValue","onUpdate:modelValue"]),i(ie,{class:"col-6",modelValue:s.cargarDetalles,"onUpdate:modelValue":h=>s.cargarDetalles=h,label:"\xBFCargar detalles del documento?"},null,8,["modelValue","onUpdate:modelValue"]),s.cargarDetalles?(y(),b("div",Ot,[i(T,{class:"col-6",modelValue:s.url,"onUpdate:modelValue":h=>s.url=h,type:"file"},null,8,["modelValue","onUpdate:modelValue"]),i(T,{class:"col-6",modelValue:s.dataTang,"onUpdate:modelValue":h=>s.dataTang=h,label:"Fecha de Expiraci\xF3n",type:"date"},null,8,["modelValue","onUpdate:modelValue"]),i(ie,{class:"col-6",modelValue:s.valido,"onUpdate:modelValue":h=>s.valido=h,label:"\xBFDocumento v\xE1lido?"},null,8,["modelValue","onUpdate:modelValue"])])):S("",!0),i(_,{class:"col-2 q-mt-md",style:{"margin-left":"auto","max-height":"30px"},onClick:h=>Ee(v),color:"negative"},{default:m(()=>l[15]||(l[15]=[k(" Eliminar ")])),_:2},1032,["onClick"])])]))),128))])):S("",!0)]),_:1})]),_:1}),i(ce,null,{default:m(()=>[i(_,{label:"Cancelar",onClick:l[3]||(l[3]=s=>r.value=!1)}),o.value>0?(y(),C(_,{key:0,onClick:Ie,icon:"mdi-chevron-left"})):S("",!0),o.value<2?(y(),C(_,{key:1,onClick:$e,icon:"mdi-chevron-right"})):S("",!0),o.value===2?(y(),C(_,{key:2,label:"Registrar",onClick:Ce,color:"primary"})):S("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),(y(!0),b(O,null,F(a.value,(s,v)=>(y(),C(G,{key:v,class:Le({"bg-grey-4":v%2===0})},{default:m(()=>[i(V,{class:"col-2"},{default:m(()=>[k(j(s.nombre),1)]),_:2},1024),i(V,{class:"col-2"},{default:m(()=>[k(j(s.trabajo),1)]),_:2},1024),i(V,{class:"col-2 text-center"},{default:m(()=>[D("div",null,[i(_,{onClick:h=>je(v),label:`${s.fechas[0]} - ${s.fechas[s.fechas.length-1]}`},null,8,["onClick","label"])]),ne(v)?(y(),b("div",Ft,[(y(!0),b(O,null,F(s.fechas,(h,$)=>(y(),b("div",{key:$},j(h),1))),128))])):S("",!0)]),_:2},1024),i(V,{class:"col-3 text-center"},{default:m(()=>[D("div",null,[s.confirmacionPREV===null?(y(),C(_,{key:0,round:"",color:"green",onClick:h=>He(v),icon:"mdi-check-circle"},null,8,["onClick"])):S("",!0),s.confirmacionPREV===null?(y(),C(_,{key:1,round:"",color:"red",onClick:h=>Qe(v),icon:"mdi-close-circle"},null,8,["onClick"])):S("",!0),s.confirmacionPREV===1?(y(),C(N,{key:2,name:"mdi-check-circle",color:"green",size:"40px",style:{"padding-right":"20px"}})):S("",!0),s.confirmacionPREV===0?(y(),C(N,{key:3,name:"mdi-close-circle",color:"red",size:"40px",style:{"padding-right":"20px"}})):S("",!0)])]),_:2},1024),i(V,{class:"col-1 text-center"},{default:m(()=>[s.confirmacionEmpresa?(y(),C(N,{key:0,name:"mdi-check-circle",color:"green",size:"40px"})):S("",!0),s.confirmacionEmpresa?S("",!0):(y(),C(N,{key:1,name:"mdi-close-circle",color:"red",size:"40px"}))]),_:2},1024),i(V,{class:"col-2 text-center"},{default:m(()=>[D("div",null,[i(_,{class:"q-mx-auto",style:{"background-color":"white"},onClick:()=>Te(s)},{default:m(()=>[i(N,{name:"description",size:"30px"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),i(de,{modelValue:R.value,"onUpdate:modelValue":l[5]||(l[5]=s=>R.value=s),persistent:""},{default:m(()=>[i(ue,{style:{"min-width":"90%","min-height":"90%",display:"flex"}},{default:m(()=>[D("div",Ut,[i(P,{class:"col-6"},{default:m(()=>[D("div",zt,"Empresa: "+j(H.value.nombre),1),D("div",At," Trabajo a realizar: "+j(H.value.trabajo),1)]),_:1}),i(B),i(P,null,{default:m(()=>[l[16]||(l[16]=D("div",{class:"text-body1"},[D("strong",null,"Fechas:")],-1)),(y(!0),b(O,null,F(H.value.fechas,(s,v)=>(y(),b("div",{key:v},j(s),1))),128))]),_:1}),i(B),i(P,null,{default:m(()=>[l[17]||(l[17]=D("div",{class:"text-body1"},[D("strong",null,"Confirmaci\xF3n:")],-1)),D("p",null," Prevencionista: "+j(se(H.value.confirmacionPREV)),1),D("p",null," Empresa: "+j(se(H.value.confirmacionEmpresa)),1)]),_:1}),i(B)]),D("div",Nt,[i(P,{class:"col-12",style:{width:"40%",height:"90%"}},{default:m(()=>[l[18]||(l[18]=D("div",{class:"text-body1"},[D("strong",null,"Documentos:")],-1)),(y(!0),b(O,null,F(H.value.Documentos,(s,v)=>(y(),b("div",{key:v},[i(_,{flat:"",color:"primary",onClick:h=>Fe(s)},{default:m(()=>[k(j(s.titulo),1)]),_:2},1032,["onClick"])]))),128))]),_:1}),i(B)]),i(ce,{style:{"align-items":"right","align-content":"flex-end"}},{default:m(()=>[i(_,{flat:"",label:"Cerrar",color:"primary",onClick:Oe})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var ia=Be(Pt,[["__scopeId","data-v-1d7acdc6"]]);export{ia as default};
