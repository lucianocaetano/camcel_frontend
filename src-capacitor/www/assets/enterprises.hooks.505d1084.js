import{b as p}from"./axios.3d912423.js";import{r as i}from"./index.c97da185.js";const f=()=>{const e=i(!0),t=i(null),r=(a=null)=>{p.get("enterprises",{params:{filter:a}}).then(s=>{e.value=!1,t.value=s.data})};return p.get("enterprises",{params:{filter:!0}}).then(a=>{e.value=!1,t.value=a.data}),{enterprises:t,isLoading:e,refetch:r}},v=e=>{const t=i(!0),r=i(null),a=()=>{p.get(`enterprises/${e}`).then(s=>{r.value=s.data.enterprise})};return p.get(`enterprises/${e}`).then(s=>{r.value=s.data.enterprise,t.value=!1}),{enterprise:r,isLoading:t,refetch:a}},h=async e=>await p.patch(`enterprises/${e}`,{is_valid:!0}),g=async e=>await p.patch(`enterprises/${e}`,{is_valid:!1}),E=async e=>await p.delete(`enterprises/${e}`),_=async e=>{const t=i(null),r=i(!1),a=i(null),s=new FormData;return s.append("RUT",e.RUT),s.append("nombre",e.name),s.append("is_valid",e.is_valid),s.append("user_id",e.user_id),e.image!==null&&s.append("image",e.image),await p.post("enterprises",s,{headers:{"Content-Type":"multipart/form-data"}}).then(n=>{t.value=n.data.enterprise}).catch(n=>{if(console.error(n),n.response.status===422){const u=n.response.data.errors;r.value=!0,a.value=u}}),{enterprise:t,isError:r,error:a}},w=async(e,t)=>{var u;const r=i(null),a=i(!1),s=i(null),n=new FormData;return n.append("_method","PUT"),n.append("nombre",t.name),n.append("user_id",(u=t.user)==null?void 0:u.id),t.image!==null&&n.append("image",t.image),await p.post(`enterprises/${e}`,n,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{o.status===200&&(r.value=o.data.enterprise)}).catch(o=>{var l;if(((l=o==null?void 0:o.response)==null?void 0:l.status)===422){const c=o.response.data.errors;a.value=!0,s.value=c}}),{enterprise:r,isError:a,error:s}};export{f as a,w as b,v as c,E as d,g as e,h as f,_ as u};
